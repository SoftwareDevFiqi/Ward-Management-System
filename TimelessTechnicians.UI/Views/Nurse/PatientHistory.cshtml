@model TimelessTechnicians.UI.ViewModel.PatientHistoryViewModel
@await Html.PartialAsync("_Navbar")


<div class="container">
    <h2 class="my-4">Patient History for <strong>@Model.FullName</strong></h2>

    <!-- Admissions Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Admissions</h3>
        </div>
        <div class="card-body">
            @if (Model.Admissions.Any())
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Admission Date</th>
                            <th>Status</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var admission in Model.Admissions)
                        {
                            <tr>
                                <td>@admission.AdmissionDate.ToString("dd MMM yyyy")</td>
                                <td>
                                    <span class="badge badge-info">@admission.Status</span>
                                </td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">No admissions available.</p>
            }
        </div>
    </div>

    <!-- Allergies Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Allergies</h3>
        </div>
        <div class="card-body">
            @if (Model.Allergies.Any())
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Allergy</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var allergy in Model.Allergies)
                        {
                            <tr>
                                <td>@allergy.Allergy.Name</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">No allergies available.</p>
            }
        </div>
    </div>

    <!-- Medications Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Medications</h3>
        </div>
        <div class="card-body">
            @if (Model.Medications.Any())
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Medication</th>
                            <th>Date Administered</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var medication in Model.Medications)
                        {
                            <tr>
                                <td>@medication.Medication.Name</td>
                                <td>@medication.DateAdministered.ToString("dd MMM yyyy")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">No medications available.</p>
            }
        </div>
    </div>

    <!-- Conditions Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Conditions</h3>
        </div>
        <div class="card-body">
            @if (Model.Conditions.Any())
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Condition</th>
                            <th>Date Diagnosed</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var condition in Model.Conditions)
                        {
                            <tr>
                                <td>@condition.Condition.Name</td>
                                <td>@condition.DateAdministered.ToString("dd MMM yyyy")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">No conditions available.</p>
            }
        </div>
    </div>

    <!-- Treatments Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Treatments</h3>
        </div>
        <div class="card-body">
            @if (Model.Treatments.Any())
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Treatment</th>
                            <th>Date Performed</th>
                            <th>Performed By</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var treatment in Model.Treatments)
                        {
                            <tr>
                                <td>@treatment.TreatmentDescription</td>
                                <td>@treatment.DatePerformed.ToString("dd MMM yyyy")</td>
                                <td>@treatment.PerformedBy</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">No treatments available.</p>
            }
        </div>
    </div>

    <!-- Vitals Section -->
    <div class="card mb-4">
        <div class="card-header">
            <h3>Vitals</h3>
        </div>
        <div class="card-body">
            @if (Model.Vitals.Any())
            {
                <table class="table table-striped table-bordered">
                    <thead class="thead-dark">
                        <tr>
                            <th>Blood Pressure</th>
                            <th>Temperature</th>
                            <th>Sugar Level</th>
                            <th>Date Recorded</th>
                        </tr>
                    </thead>
                    <tbody>
                        @foreach (var vital in Model.Vitals)
                        {
                            <tr>
                                <td>@vital.BloodPressure</td>
                                <td>@vital.Temperature</td>
                                <td>@vital.SugarLevel</td>
                                <td>@vital.RecordedDate.ToString("dd MMM yyyy")</td>
                            </tr>
                        }
                    </tbody>
                </table>
            }
            else
            {
                <p class="text-muted">No vitals available.</p>
            }
        </div>
    </div>
</div>

